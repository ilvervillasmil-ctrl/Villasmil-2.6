from villasmil_omega.core import computethetapremises


def test_compute_theta_multiple_conflicts_increases_tension():
    """
    Más pares incompatibles ⇒ mayor tensión global Θ(C).
    Comparamos un contexto con un solo conflicto vs. uno con varios.
    """

    # Contexto A: un solo conflicto (A verdadero vs A falso)
    premises_single_conflict = [
        {"id": "p1", "constraints": {"A": True}},
        {"id": "p2", "constraints": {"A": False}},
    ]
    theta_single = computethetapremises(premises_single_conflict)

    # Contexto B: múltiples conflictos (A, B y C se cruzan mal)
    premises_multiple_conflicts = [
        {"id": "p1", "constraints": {"A": True, "B": False}},
        {"id": "p2", "constraints": {"A": False, "C": True}},
        {"id": "p3", "constraints": {"B": True, "C": False}},
    ]
    theta_multiple = computethetapremises(premises_multiple_conflicts)

    # La tensión global con más pares incompatibles debe ser mayor
    assert theta_multiple > theta_single
