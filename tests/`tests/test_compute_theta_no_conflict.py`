from villasmil_omega.core import computethetapremises


def test_compute_theta_no_conflict_all_compatible():
    """
    Si todas las premisas son compatibles entre sí, Θ(C) debe ser 0.0.
    El sistema no debe inventar conflicto donde no lo hay.
    """
    premises = [
        {"id": 1, "constraints": {"A": True}},
        {"id": 2, "constraints": {"B": True}},
        {"id": 3, "constraints": {"C": True}},
    ]

    theta = computethetapremises(premises)

    assert theta == 0.0


def test_compute_theta_large_context_still_zero_without_conflicts():
    """
    Aun con muchas premisas compatibles, Θ(C) debe permanecer en 0.0.
    Complejidad creciente sin conflicto no debe generar tensión.
    """

    premises = [
        {"id": "p1", "constraints": {"A": True,  "B": True}},
        {"id": "p2", "constraints": {"A": True,  "C": True}},
        {"id": "p3", "constraints": {"B": True,  "C": True}},
        {"id": "p4", "constraints": {"D": False, "E": True}},
        {"id": "p5", "constraints": {"D": False, "F": True}},
        {"id": "p6", "constraints": {"E": True,  "F": True}},
    ]

    theta = computethetapremises(premises)

    assert theta == 0.0
