from villasmil_omega.core import updateL2


def test_updateL2_moves_value_towards_optimum_from_below():
    """
    Si L2 está por debajo de L2_opt, updateL2 debe acercarlo a 0.125 sin sobrepasarse.
    """
    L2_initial = 0.10
    L2_opt = 0.125
    k = 0.25

    L2_new = updateL2(L2_initial, L2_opt, k)

    assert L2_new > L2_initial
    assert L2_new < L2_opt
    assert abs(L2_opt - L2_new) < abs(L2_opt - L2_initial)


def test_updateL2_moves_value_towards_optimum_from_above():
    """
    Si L2 está por encima de L2_opt, updateL2 debe bajarlo hacia 0.125 sin pasarse.
    """
    L2_initial = 0.15      # por encima del óptimo 0.125
    L2_opt = 0.125
    k = 0.25

    L2_new = updateL2(L2_initial, L2_opt, k)

    # Debe bajar (acercarse) pero seguir por encima del óptimo
    assert L2_new < L2_initial
    assert L2_new > L2_opt

    # La distancia al óptimo debe ser menor
    assert abs(L2_opt - L2_new) < abs(L2_opt - L2_initial)

